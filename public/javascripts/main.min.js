(e=>{const t=window.location.pathname;if("/"===t&&(e("#login").show(),e("#logout").hide(),document.getElementById("add").disabled=!0,e(".modal").on("shown.bs.modal",function(){e(this).find("[autofocus]").focus()})),"/homepage"===t){e("#logout").show(),e("#login").hide(),document.getElementById("add").disabled=!1;const t=e("#whiskeys-template").html(),a=Handlebars.compile(t);e.ajax({type:"GET",url:"/whiskeys",success:t=>{e("#whiskeys-in-journal").html(a(t))},error:e=>{alert("Error getting whiskeys!")}})}e("#newUser").on("click",()=>{const t={username:e("#username").val(),password:e("#password").val()};e.ajax({type:"POST",url:"/users",data:t,success:e=>{window.location.replace("/homepage"),alert(`Welcome to Whiskey Journal ${e.user.username}!`)},error:()=>{alert("Error adding user!")}})}),e("#whiskeys-table").delegate(".modalButton","click",function(){const t=e("#show-whiskey-template").html(),a=Handlebars.compile(t);e.ajax({type:"GET",url:`/add/${this.id}`,success:t=>{e("#show-whiskey").html(a(t))},error:()=>{alert("Error getting whiskey!")}})}),e("#showWhiskeyModal").delegate(".modalButton","click",function(){const t=e("#whiskey-edit-template").html(),a=Handlebars.compile(t);e.ajax({type:"GET",url:`/add/${this.id}`,success:t=>{e("#whiskey-modal-form").html(a(t))},error:()=>{alert("Error getting whiskey!")}})}),e("#saveWhiskey").on("click",()=>{const t=e("#edit-whiskeyId").val(),a={whiskeyName:e("#edit-whiskeyName").val(),distillery:e("#edit-distillery").val(),style:e("#edit-style").val(),country:e("#edit-country").val(),age:e("#edit-age").val(),price:e("#edit-price").val(),location:e("#edit-location").val(),rating:e("#edit-rating").val(),notes:e("#edit-notes").val()};e.ajax({type:"PATCH",url:`/add/${t}`,data:a,success:e=>{alert(`Updated ${e.whiskey.whiskeyName}`),window.location.reload()},error:()=>{alert("Error saving whiskey!")}})}),e("#deleteWhiskey").on("click",()=>{const t=e("#edit-whiskeyId").val();e.ajax({type:"DELETE",url:`/add/${t}`,success:e=>{alert(`Deleted ${e.whiskey.whiskeyName}`),window.location.reload()},error:()=>{alert("Error deleting whiskey!")}})})})(jQuery);